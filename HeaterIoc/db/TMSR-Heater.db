#! Generated by VisualDCT 3.0-beta
#! DBDSTART
#! DBDEND
record(epid, "$(Heater):pid") {
   field(TRIG, "1")
   field(LOPR, "0")
   field(SCAN, ".1 second")
   field(STPL, "$(Heater):calc.VAL PP NMS")
   field(FMOD, "PID")
   field(LOW, "4915")
   field(OUTL, "$(PW_OUT) PP NMS")
   field(FLNK, "$(Heater):out PP NMS")
   field(KP, "40")
   field(KI, "10")
   field(KD, "4")
   field(HIHI, "25000")
   field(FBON, "On")
   field(INP, "$(TMP_FB) PP NMS")
   field(LLSV, "MAJOR")
   field(LSV, "MINOR")
   field(HIGH, "24576")
   field(HHSV, "MAJOR")
   field(LOLO, "0")
   field(HSV, "MINOR")
   field(DRVL, "0")
   field(EGU, "%")
   field(DRVH, "24576")
   field(SMSL, "closed_loop")
   field(HOPR, "24576")
}

record(ai, "$(Heater):setTemp") {
}

record(calc, "$(Heater):calc") {
   field(CALC, "(ABS(A-B)>5)?(A+C*(A>B?(-1):1)):B")
   field(INPC, "3.3")
   field(INPB, "$(Heater):setTemp.VAL NPP NMS")
   field(INPA, "$(TMP_FB)")
   field(FLNK, "$(Heater):pid PP NMS")
   field(SCAN, "300 second")
}

record(calc, "$(Heater):startRS") {
   field(DESC, "RS")
   field(FLNK, "$(Heater):Ctrl1 PP NMS")
   field(CALC, "A && (!B) || ( (!B) && C )")
   field(INPC, "$(Heater):startRS.VAL  NPP NMS")
   field(HOPR, "10")
   field(HIHI, "0.9")
   field(HIGH, "0.9")
   field(LOW, "-1")
   field(LOLO, "-1")
   field(HHSV, "MAJOR")
   field(HSV, "MINOR")
   field(LSV, "MINOR")
   field(LLSV, "MAJOR")
   field(INPA, "$(Heater):Ctrl.VAL PP NMS")
   field(INPB, "$(Heater):calcRS.VAL NPP NMS")
}

record(bo, "$(Heater):Ctrl") {
   field(ONAM, "停止")
   field(ZSV, "NO_ALARM")
   field(ZNAM, "启动")
}

record(calc, "$(Heater):calcRS") {
   field(DESC, "RS")
   field(FLNK, "$(Heater):Alarm PP NMS")
   field(CALC, "!(A && (!(B>D)) || ( (!(B>D)) && C ))")
   field(INPC, "$(Heater):calcRS.VAL  NPP NMS")
   field(HOPR, "10")
   field(HIHI, "0.9")
   field(HIGH, "0.9")
   field(LOW, "-1")
   field(LOLO, "-1")
   field(HHSV, "MAJOR")
   field(HSV, "MINOR")
   field(LSV, "MINOR")
   field(LLSV, "MAJOR")
   field(INPD, "$(Heater):setAlarm.VAL NPP NMS")
   field(INPA, "$(Heater):AKN.VAL PP NMS")
   field(INPB, "$(TMP_FB)")
}

record(ai, "$(Heater):setAlarm") {
}

record(bo, "$(Heater):AKN") {
   field(ONAM, "连锁复位")
   field(ZNAM, "连锁复位")
}

record(bi, "$(Heater):Alarm") {
   field(INP, "$(Heater):calcRS.VAL PP NMS")
   field(ONAM, "超温连锁")
   field(ZSV, "NO_ALARM")
   field(OSV, "MAJOR")
   field(ZNAM, "温度正常")
}

record(bo, "$(Heater):Ctrl1") {
   field(OUT, "$(CTRL_OUT) PP NMS")
   field(ONAM, "加热启动")
   field(DOL, "$(Heater):startRS.VAL PP NMS")
   field(ZSV, "MAJOR")
   field(OMSL, "closed_loop")
   field(OSV, "NO_ALARM")
   field(ZNAM, "加热停止")
}

record(ai, "$(Heater):out") {
   field(EGUL, "0")
   field(EGUF, "100")
   field(LINR, "LINEAR")
   field(INP, "$(Heater):pid.OVAL NPP NMS")
}

#! Record("$(Heater):pid", 200, 140, -16777216, 0, "null")
#! Field("$(Heater):pid.TRIG", -16777216, 0, "")
#! Field("$(Heater):pid.LOPR", -16777216, 0, "")
#! Field("$(Heater):pid.SCAN", -16777216, 0, "")
#! Field("$(Heater):pid.STPL", -16777216, 0, "")
#! Field("$(Heater):pid.FMOD", -16777216, 0, "")
#! Field("$(Heater):pid.LOW", -16777216, 0, "")
#! Field("$(Heater):pid.OUTL", -16777216, 0, "")
#! Field("$(Heater):pid.FLNK", -16777216, 0, "")
#! Field("$(Heater):pid.KP", -16777216, 0, "")
#! Field("$(Heater):pid.KI", -16777216, 0, "")
#! Field("$(Heater):pid.KD", -16777216, 0, "")
#! Field("$(Heater):pid.HIHI", -16777216, 0, "")
#! Field("$(Heater):pid.FBON", -16777216, 0, "")
#! Field("$(Heater):pid.INP", -16777216, 0, "")
#! Field("$(Heater):pid.LLSV", -16777216, 0, "")
#! Field("$(Heater):pid.LSV", -16777216, 0, "")
#! Field("$(Heater):pid.HIGH", -16777216, 0, "")
#! Field("$(Heater):pid.HHSV", -16777216, 0, "")
#! Field("$(Heater):pid.LOLO", -16777216, 0, "")
#! Field("$(Heater):pid.HSV", -16777216, 0, "")
#! Field("$(Heater):pid.DRVL", -16777216, 0, "")
#! Field("$(Heater):pid.EGU", -16777216, 0, "")
#! Field("$(Heater):pid.DRVH", -16777216, 0, "")
#! Field("$(Heater):pid.SMSL", -16777216, 0, "")
#! Field("$(Heater):pid.HOPR", -16777216, 0, "")
#! Record("$(Heater):setTemp", 120, 320, -16777216, 0, "null")
#! Record("$(Heater):calc", 320, 300, -16777216, 0, "null")
#! Field("$(Heater):calc.CALC", -16777216, 0, "")
#! Field("$(Heater):calc.INPC", -16777216, 0, "")
#! Field("$(Heater):calc.INPB", -16777216, 0, "")
#! Field("$(Heater):calc.INPA", -16777216, 0, "")
#! Field("$(Heater):calc.FLNK", -16777216, 0, "")
#! Field("$(Heater):calc.SCAN", -16777216, 0, "")
#! Record("$(Heater):startRS", 380, 620, -16777216, 0, "null")
#! Field("$(Heater):startRS.DESC", -16777216, 0, "")
#! Field("$(Heater):startRS.FLNK", -16777216, 0, "")
#! Field("$(Heater):startRS.CALC", -16777216, 0, "")
#! Field("$(Heater):startRS.INPC", -16777216, 0, "")
#! Field("$(Heater):startRS.HOPR", -16777216, 0, "")
#! Field("$(Heater):startRS.HIHI", -16777216, 0, "")
#! Field("$(Heater):startRS.HIGH", -16777216, 0, "")
#! Field("$(Heater):startRS.LOW", -16777216, 0, "")
#! Field("$(Heater):startRS.LOLO", -16777216, 0, "")
#! Field("$(Heater):startRS.HHSV", -16777216, 0, "")
#! Field("$(Heater):startRS.HSV", -16777216, 0, "")
#! Field("$(Heater):startRS.LSV", -16777216, 0, "")
#! Field("$(Heater):startRS.LLSV", -16777216, 0, "")
#! Field("$(Heater):startRS.INPA", -16777216, 0, "")
#! Field("$(Heater):startRS.INPB", -16777216, 0, "")
#! Record("$(Heater):Ctrl", 100, 600, -16777216, 0, "null")
#! Field("$(Heater):Ctrl.ONAM", -16777216, 0, "")
#! Field("$(Heater):Ctrl.ZSV", -16777216, 0, "")
#! Field("$(Heater):Ctrl.ZNAM", -16777216, 0, "")
#! Record("$(Heater):calcRS", 320, 980, -16777216, 0, "null")
#! Field("$(Heater):calcRS.DESC", -16777216, 0, "")
#! Field("$(Heater):calcRS.FLNK", -16777216, 0, "")
#! Field("$(Heater):calcRS.CALC", -16777216, 0, "")
#! Field("$(Heater):calcRS.INPC", -16777216, 0, "")
#! Field("$(Heater):calcRS.HOPR", -16777216, 0, "")
#! Field("$(Heater):calcRS.HIHI", -16777216, 0, "")
#! Field("$(Heater):calcRS.HIGH", -16777216, 0, "")
#! Field("$(Heater):calcRS.LOW", -16777216, 0, "")
#! Field("$(Heater):calcRS.LOLO", -16777216, 0, "")
#! Field("$(Heater):calcRS.HHSV", -16777216, 0, "")
#! Field("$(Heater):calcRS.HSV", -16777216, 0, "")
#! Field("$(Heater):calcRS.LSV", -16777216, 0, "")
#! Field("$(Heater):calcRS.LLSV", -16777216, 0, "")
#! Field("$(Heater):calcRS.INPD", -16777216, 0, "")
#! Field("$(Heater):calcRS.INPA", -16777216, 0, "")
#! Field("$(Heater):calcRS.INPB", -16777216, 0, "")
#! Record("$(Heater):setAlarm", 100, 1100, -16777216, 0, "null")
#! Record("$(Heater):AKN", 100, 940, -16777216, 0, "null")
#! Field("$(Heater):AKN.ONAM", -16777216, 0, "")
#! Field("$(Heater):AKN.ZNAM", -16777216, 0, "")
#! Record("$(Heater):Alarm", 660, 1060, -16777216, 0, "null")
#! Field("$(Heater):Alarm.INP", -16777216, 0, "")
#! Field("$(Heater):Alarm.ONAM", -16777216, 0, "")
#! Field("$(Heater):Alarm.ZSV", -16777216, 0, "")
#! Field("$(Heater):Alarm.OSV", -16777216, 0, "")
#! Field("$(Heater):Alarm.ZNAM", -16777216, 0, "")
#! Record("$(Heater):Ctrl1", 620, 680, -16777216, 0, "null")
#! Field("$(Heater):Ctrl1.OUT", -16777216, 0, "")
#! Field("$(Heater):Ctrl1.ONAM", -16777216, 0, "")
#! Field("$(Heater):Ctrl1.DOL", -16777216, 0, "")
#! Field("$(Heater):Ctrl1.ZSV", -16777216, 0, "")
#! Field("$(Heater):Ctrl1.OMSL", -16777216, 0, "")
#! Field("$(Heater):Ctrl1.OSV", -16777216, 0, "")
#! Field("$(Heater):Ctrl1.ZNAM", -16777216, 0, "")
#! Record("$(Heater):out", 600, 120, -16777216, 0, "null")
#! Field("$(Heater):out.EGUL", -16777216, 0, "")
#! Field("$(Heater):out.EGUF", -16777216, 0, "")
#! Field("$(Heater):out.LINR", -16777216, 0, "")
#! Field("$(Heater):out.INP", -16777216, 0, "")
#! View(325, 296, 0.75)
#! Link("$(Heater):calc.FLNK", "$(Heater):pid")
#! Link("$(Heater):setTemp.VAL", "$(Heater):calc.INPB")
#! Link("$(Heater):calc.VAL", "$(Heater):pid.STPL")
#! Link("$(Heater):Ctrl.VAL", "$(Heater):startRS.INPA")
#! Link("$(Heater):calcRS.VAL", "$(Heater):calcRS.INPC")
#! Link("$(Heater):setAlarm.VAL", "$(Heater):calcRS.INPD")
#! Link("$(Heater):AKN.VAL", "$(Heater):calcRS.INPA")
#! Link("$(Heater):calcRS.FLNK", "$(Heater):Alarm")
#! Link("$(Heater):calcRS.VAL", "$(Heater):startRS.INPB")
#! Link("$(Heater):calcRS.VAL", "$(Heater):Alarm.INP")
#! Link("$(Heater):startRS.VAL", "$(Heater):startRS.INPC")
#! Link("$(Heater):pid.FLNK", "$(Heater):out")
#! Link("$(Heater):pid.OVAL", "$(Heater):out.INP")
#! Link("$(Heater):startRS.VAL", "$(Heater):Ctrl1.DOL")
#! Link("$(Heater):startRS.FLNK", "$(Heater):Ctrl1")
#! Connector("$(Heater):calc/FLNK2", "$(Heater):pid", 150, 139, -16777216, "")
#! Connector("$(Heater):calc/FLNK1", "$(Heater):calc/FLNK2", 336, 90, -16777216, "")
#! Connector("$(Heater):calcRS/INPA3", "$(Heater):calcRS/INPA2", 270, 983, -16777216, "")
#! Connector("$(Heater):calcRS/INPD3", "$(Heater):calcRS/INPD2", 270, 1069, -16777216, "")
#! Connector("$(Heater):calcRS/INPA2", "$(Heater):calcRS/INPA1", 258, 971, -16777216, "")
#! Connector("$(Heater):calcRS/INPD2", "$(Heater):calcRS/INPD1", 269, 1095, -16777216, "")
#! Connector("$(Heater):calcRS/INPA1", "$(Heater):AKN.VAL", 246, 971, -16777216, "")
#! Connector("$(Heater):calc/INPB3", "$(Heater):calc/INPB2", 270, 291, -16777216, "")
#! Connector("$(Heater):calcRS/INPD1", "$(Heater):setAlarm.VAL", 269, 1115, -16777216, "")
#! Connector("$(Heater):calc/INPB2", "$(Heater):calc/INPB1", 288, 250, -16777216, "")
#! Connector("$(Heater):calc/INPB1", "$(Heater):setT.VAL", 307, 303, -16777216, "")
#! Connector("$(Heater):startRS/INPC3", "$(Heater):startRS/INPC2", 305, 620, -16777216, "")
#! Connector("$(Heater):pid/STPL3", "$(Heater):pid/STPL2", 150, 123, -16777216, "")
#! Connector("$(Heater):startRS/INPC2", "$(Heater):startRS/INPC1", 414, 572, -16777216, "")
#! Connector("$(Heater):pid/STPL2", "$(Heater):pid/STPL1", 336, 90, -16777216, "")
#! Connector("$(Heater):startRS/INPC1", "$(Heater):startRS.VAL", 523, 652, -16777216, "")
#! Connector("$(Heater):pid/STPL1", "$(Heater):calc.VAL", 523, 251, -16777216, "")
#! Connector("$(Heater):startRS/INPA3", "$(Heater):startRS/INPA2", 270, 634, -16777216, "")
#! Connector("$(Heater):startRS/INPA2", "$(Heater):startRS/INPA1", 258, 632, -16777216, "")
#! Connector("$(Heater):startRS/INPA1", "$(Heater):Control.VAL", 247, 632, -16777216, "")
#! Connector("$(Heater):calc/FLNK", "$(Heater):calc/FLNK1", 523, 243, -16777216, "")
#! Connector("$(Heater):calcRS/INPC3", "$(Heater):calcRS/INPC2", 270, 965, -16777216, "")
#! Connector("$(Heater):pid/FLNK", "$(Heater):out", 499, 180, -16777216, "")
#! Connector("$(Heater):calcRS/INPC2", "$(Heater):calcRS/INPC1", 430, 902, -16777216, "")
#! Connector("$(Heater):calcRS/INPC1", "$(Heater):calcRS.VAL", 590, 997, -16777216, "")
#! Connector("$(Heater):out/INP1", "$(Heater):pid.OVAL", 499, 180, -16777216, "")
#! TextBox(TextBox0, 484, 444, 580, 500, 0, Dialog, 12, 0, -16777216, "5分钟执行周期，每次加3.3度", 0)
#! TextBox(TextBox1, 124, 404, 224, 444, 0, Dialog, 12, 0, -16777216, "目标温度设定值", 0)
#! TextBox(TextBox2, 284, 24, 460, 80, 0, Dialog, 12, 0, -16777216, "加强型PID，反馈温度来源于实测值$(temp_FB)调节输出到$(PW_OUT)", 0)
#! TextBox(TextBox3, 624, 224, 724, 264, 0, Dialog, 12, 0, -16777216, "功率调节输出值", 0)
#! TextBox(TextBox4, 124, 684, 224, 724, 0, Dialog, 12, 0, -16777216, "启/停控制", 0)
#! TextBox(TextBox5, 664, 764, 764, 804, 0, Dialog, 12, 0, -16777216, "启动输出", 0)
#! TextBox(TextBox6, 684, 1164, 784, 1204, 0, Dialog, 12, 0, -16777216, "超温连锁输出", 0)
#! TextBox(TextBox7, 124, 1164, 224, 1204, 0, Dialog, 12, 0, -16777216, "连锁温度设定", 0)
#! TextBox(TextBox8, 124, 1024, 224, 1064, 0, Dialog, 12, 0, -16777216, "超温连锁复位", 0)
